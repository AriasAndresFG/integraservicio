{% extends "base.html" %}
{% block title %}Mis Reservas{% endblock %}

{% block content %}

<div class="container">

    <header class="user-header">
        <h3><i class="fas fa-calendar-check" style="color: var(--primary);"></i> Historial</h3>

        <div style="display:flex; gap:15px; align-items:center;">
            <div class="user-profile-pill">
                <i class="fas fa-user-circle" style="color: var(--primary);"></i>
                <span style="color: #fff; font-weight: 500;">{{ user.nombre }}</span>
            </div>

            <!-- üîß BOT√ìN CORREGIDO, IGUAL AL DEL DASHBOARD -->
            <a href="/logout" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
            </a>
        </div>
    </header>

    <nav class="admin-nav">
        <a href="/user/dashboard">
            <i class="fas fa-search"></i> Explorar Recursos
        </a>
        <a class="active" href="/user/reservas">
            <i class="fas fa-history"></i> Mis Reservas
        </a>
    </nav>

    <section>

        <div style="text-align: left; margin-bottom: 25px;">
            <h2 style="color: var(--primary); margin-bottom: 5px;">Mis Reservas</h2>
            <p style="color: var(--text-muted);">Gestiona tus reservas activas y consulta tu historial.</p>
        </div>

        <div class="catalog-grid">

            {% for r in reservas %}
            <div class="resource-card">

                <div class="resource-header">
                    <span class="resource-tag">{{ r.tipo }}</span>
                    <span class="resource-status" style="color: #fff;">
                        {% if r.estado == 'Activa' %}
                            <i class="fas fa-spinner fa-spin" style="color: var(--primary);"></i>
                        {% else %}
                            <i class="fas fa-check-square" style="color: #666;"></i>
                        {% endif %}
                        {{ r.estado }}
                    </span>
                </div>

                <h3 style="color: var(--primary); margin-bottom: 15px;">{{ r.recurso }}</h3>

                <div style="background: #000; padding: 12px; border-radius: 6px; border-left: 3px solid var(--primary); margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <i class="fas fa-calendar-day" style="color: #666; width: 25px;"></i>
                        <span style="color: #fff;">{{ r.fecha }}</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-clock" style="color: #666; width: 25px;"></i>
                        <span style="color: #fff;">{{ r.hora }}</span>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; gap: 10px;">
                    <button class="btn-primary" style="margin:0; font-size: 0.85em;">
                        <i class="fas fa-info-circle"></i> Detalles
                    </button>
                    {% if r.estado == 'Activa' %}
                    <button class="btn-light" style="margin:0; border-color: #331111; color: #ff6666; font-size: 0.85em;">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    {% endif %}
                </div>

            </div>
            {% endfor %}

        </div>

    </section>

</div>

{% endblock %}
